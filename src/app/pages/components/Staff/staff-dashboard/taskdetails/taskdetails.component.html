
<app-stafftoolbar (toggleSidebarForMe)="sideBarToggler()"></app-stafftoolbar>
<mat-drawer-container>
    <mat-drawer mode="side" [opened]="sideBarOpen">
        <app-staffsidenav></app-staffsidenav>
    </mat-drawer>
    <mat-drawer-content>
        <router-outlet></router-outlet>
        
           <section class="">
            <div class="container">

                
               

                <body >
                    <main>
                      
                        
                      
                
                       
                       
                        
                        
                        
                       
                      <div class="title" style="margin-top: 10px;">
                        <h1><span>ACCOMPLISHMENTS</span> TABLE</h1>
                        

                        
                    </div>
                     
                          
                    </main>

                    <div class="container">
                        <!-- Task Details Header -->
                        <div class="task-header card p-4 mb-4">
                          
                            <div class="task-info-grid">
                                <div class="info-item">
                                    <strong>Task Name:</strong>
                                    <span style="text-transform: uppercase;">{{tasks.pt_task_name}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Task Category:</strong>
                                    <span style="text-transform: uppercase;">{{categoryName}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Starting Date:</strong>
                                    <span>{{tasks.pt_starting_date | date:'MM-dd-yyyy'}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Completion Date:</strong>
                                    <span>{{tasks.pt_completion_date | date:'MM-dd-yyyy'}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Status:</strong>
                                    <span [ngClass]="{
                                        'badge-ongoing': getStatusText(tasks.pt_status) === 'Ongoing',
                                        'badge-complete': getStatusText(tasks.pt_status) === 'Complete',
                                        'badge-due': getStatusText(tasks.pt_status) === 'Due'
                                    }" class="badge">{{getStatusText(tasks.pt_status)}}</span>
                                    
                                </div>
                            </div>
                        </div>
                    
                        <!-- Estimated Materials Section -->
                        <div class="table-wrapper card p-4 mb-4">
                            <h2 *ngIf="tasks.pt_status !== 'C'">Estimated Resources <button class="btn btn-outline-dark" style="margin-left: 20px;"  (click)="openTaskModal(tasks.id)" >
                                Update Task
                                 
                                  </button>
                                  <app-archi 
                                  *ngIf="isTaskOpen" (close)="closeTaskModal()">
                          </app-archi></h2>
                            
                            <table class="table modern-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Resources Name</th>
                                        <th>Quantity</th>
                                        <th>Resources Left</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let resource of resources; let i =index">
                                        <td>{{i + 1}}</td>
                                        <td style="text-transform: uppercase;">{{resource.resource_name}}</td>
                                        <td>{{resource.qty}}</td>
                                        <td>{{resource.left_qty}}</td>
                                        <td style="text-align: center;"> 
                                            <a class="btn btn-outline-dark" (click)="openEditSubModal(resource.id)" class="view">Edit</a>
                                            <app-editresource *ngIf="isEditSubModalOpen"
                                            [resourceId]="selectedResource!"
                                            (close)="closeEditSubModal()"></app-editresource>
                                        </td>
                                        
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    
                        <!-- Used Materials Section -->
                        <div class="table-wrapper card p-4 mb-4">
                            <h2>History Logs</h2>   
                            
                            <table class="table modern-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Resources Name</th>
                                        <th>Resources Used</th>
                                        <th>Staff</th>
                                        <th>Used At</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let use of used_resources; let i =index">
                                        <td>{{i + 1}}</td>
                                        <td style="text-transform: uppercase;">{{use.used_resource_name}}</td>
                                        <td>{{use.resource_qty}}</td>
                                        <td style="text-transform: uppercase;">{{use.first_name}} {{use.last_name}}</td>
                                        <td>{{use.created_at | date:'MM-dd-yyyy'}}</td>
                                        
                                    </tr>
                                </tbody>
                            </table>
                        </div>








                    </div>
                    
                    <div class="container">
                        <div class="cards-container d-flex flex-wrap justify-content-center">
                            <!-- Project Item 1 -->
                            <div class="cards project-item card-custom m-3" *ngIf="task_image.week1_img ">
                                <img [src]="'http://localhost:8000' + task_image.week1_img" alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.week1_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Week 1</strong></h3>
                                </div>
                            </div>
                    
                            <!-- Project Item 2"  -->
                            <div class="cards project-item card-custom m-3"*ngIf="task_image.week2_img ">
                                <img [src]="'http://localhost:8000' + task_image.week2_img" alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.week2_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Week 2</strong></h3>
                                </div>
                            </div>
                    
                            <!-- Project Item 3 -->
                            <div class="cards project-item card-custom m-3" *ngIf="task_image.week3_img">
                                <img [src]="'http://localhost:8000' + task_image.week3_img" alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.week3_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Week 3</strong></h3>
                                </div>
                            </div>



                            <div class="cards project-item card-custom m-3" *ngIf="task_image.week4_img ">
                                <img [src]="'http://localhost:8000' + task_image.week4_img" alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.week4_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Week 4</strong></h3>
                                </div>
                            </div>



                            <div class="cards project-item card-custom m-3" *ngIf="task_image.week5_img ">
                                <img [src]="'http://localhost:8000' + task_image.week5_img" alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.week5_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Week 5</strong></h3>
                                </div>
                            </div>



                            <div class="cards project-item card-custom m-3" *ngIf="task_image.update_img ">
                                <img [src]="'http://localhost:8000' + task_image.update_img"  alt="Project Image" class="card-image">
                                <div class="project-details">
                                    <h3><strong>{{task_image.update_img_uploaded_at}}</strong></h3>
                                    <h3><strong>Completed</strong></h3>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                 
                 
                </body>
               
                
               
             
            </div>
            
          
           </section>
           

       
          
            
        
        <router-outlet></router-outlet>
    </mat-drawer-content>
</mat-drawer-container>