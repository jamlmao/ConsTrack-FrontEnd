
<app-stafftoolbar (toggleSidebarForMe)="sideBarToggler()"></app-stafftoolbar>
<mat-drawer-container>
    <mat-drawer mode="side" [opened]="sideBarOpen">
        <app-staffsidenav></app-staffsidenav>
    </mat-drawer>
    <mat-drawer-content>
        <router-outlet></router-outlet>
        
           <section class="">
            <div class="container">

                
               

                <body >
                    <main>
                      
                        
                      
                
                       
                       
                        
                        
                        
                       
                      <div class="title" style="margin-top: 10px;">
                        <h1><span>ACCOMPLISHMENTS</span> TABLE</h1>
                        

                        
                    </div>
                     
                          
                    </main>

                    <div class="container" style="margin-top: -70px;">
                        <!-- Task Details Header -->
                        <div class="task-header card p-4 mb-4">
                          
                            <div class="task-info-grid">
                                <div class="info-item">
                                    <strong>Task Name:</strong>
                                    <span style="text-transform: uppercase;">{{tasks.pt_task_name}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Task Category:</strong>
                                    <span style="text-transform: uppercase;">{{categoryName}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Starting Date:</strong>
                                    <span>{{tasks.pt_starting_date | date:'MM-dd-yyyy'}}</span>
                                </div>
                                <div class="info-item">
                                    <strong>Completion Date:</strong>
                                    <span>{{tasks.pt_completion_date | date:'MM-dd-yyyy'}}</span>
                                </div>
                                
                                
                                <div class="info-item">
                                    <strong>Status:</strong>
                                    <span [ngClass]="{
                                        'badge-ongoing': getStatusText(tasks.pt_status) === 'Ongoing',
                                        'badge-complete': getStatusText(tasks.pt_status) === 'Complete',
                                        'badge-due': getStatusText(tasks.pt_status) === 'Due'
                                    }" class="badge">{{getStatusText(tasks.pt_status)}}</span>
                                    
                                </div>
                            </div>
                            <div class="task-info-grid" style="margin-top: 10px;">
                                <div class="info-item">
                                    <strong>Budget:</strong>
                                    <span>30000</span>
                                </div>
                                <div class="info-item">
                                    <strong>Remaining Budget:</strong>
                                    <span>12000</span>
                                </div>
                                <div class="info-item">
                                    <strong>Percentage:</strong>
                                    <span>40%</span>
                                </div>
                                <div class="info-item">
                                    <button class="btn btn-outline-dark" *ngIf="tasks.percentage >= 95 && tasks.pt_status !== 'C'" style="margin-left: 20px;" (click)="CompleteTask(tasks.id)">
                                        Complete Task </button>
                                </div>
                                
                                <div class="info-item">
                                    <button class="btn btn-outline-dark" *ngIf="tasks.pt_status !=='C'" style="margin-top: 20px;"  (click)="openTaskModal(tasks.id)" >
                                        Update Task </button>
                                    <app-archi *ngIf="isTaskOpen" (close)="closeTaskModal()"></app-archi>
                                          
                                </div>

                                
                                
                            </div>
                            <h2 >
                              
                        
                            </h2>
                            <hr>
                         
                            <table>
                                <thead>
                                    <tr>
                                  
                                        <th>Resources</th>
                                        <th>Quantity</th>
                                        <th>Remaining</th>
                                        <th *ngIf="tasks.pt_status !=='C'" width="5"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let resource of resources; let i =index">
                                   
                                        <td style="text-transform: uppercase;">{{resource.resource_name}}</td>
                                        <td>{{resource.qty}}</td>
                                        <td>{{resource.left_qty}}</td>
                                        <td style="text-align: center;"> 
                                            <a class="btn btn-dark" (click)="openEditSubModal(resource.id)" *ngIf="tasks.pt_status !=='C'">Edit</a>
                                            <app-editresource *ngIf="isEditSubModalOpen"
                                            [resourceId]="selectedResource!"
                                            (close)="closeEditSubModal()"></app-editresource>
                                        </td>
                                        
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col-12"><div class="table-wrapper card p-4 mb-4">
                            <h2 >Resources Accomplishments 
                             
                        
                            </h2>
                         
                            <table class="table modern-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Description</th>
                                        <th>Name</th>
                                        <th>Budget</th>
                                        <th>Used</th>
                                        <th>Staff</th>
                                        <th>Date</th>
                                        <th>Day</th>
                                        <th>Picture</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let task of task_image; let i =index" (click)="openModal(task.images)">
                                        <td>{{i + 1}}</td>
                                        <td style="text-transform: uppercase;"></td>
                                        <td></td>
                                        <td>123</td>
                                        <td></td>
                                        <td></td>
                                        <td>{{task.uploaded_at}}</td>
                                        <td>{{task.day}}</td>
                                        <td> <img [src]="'http://localhost:8000' + task.mainImage" alt="Project Image" style="width:70px; height: 40px; cursor: pointer;" > </td>
                                       
                                        
                                    </tr>
                                </tbody>
                            </table>
                        </div></div>

                       
                        

                        <div class="container">
                            <div class="cards-container d-flex flex-wrap justify-content-center">
                              <div class="cards project-item card-custom m-3" *ngFor="let task of task_image" (click)="openModal(task.images)">
                                <img [src]="'http://localhost:8000' + task.mainImage" alt="Project Image" class="card-image">
                                <div class="project-details">
                                  <h3><strong>{{task.uploaded_at}}</strong></h3>
                                  <h3><strong>{{task.day}}</strong></h3>
                                  <h3 style="margin-top: -30px; margin-bottom: -10px;"><strong>Completed</strong></h3>
                                </div>
                              </div>
                            </div>
                          </div>
                          
                          <app-image-modal [images]="selectedImages" [isVisible]="isModalVisible" (close)="closeModal()"></app-image-modal>
                    
                        <!-- Used Materials Section -->
                        








                    </div>
                    
                    
                    
                 
                 
                </body>
               
                
               
             
            </div>
            
          
           </section>
           

       
          
            
        
        <router-outlet></router-outlet>
    </mat-drawer-content>
</mat-drawer-container>